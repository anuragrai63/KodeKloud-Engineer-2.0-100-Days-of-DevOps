# Day 30: Git hard reset

## Scenario

The Nautilus application development team was working on a test Git repository at `/usr/src/kodekloudrepos/media` on the Storage Server in Stratos DC. The team needs to reset the commit history so that only two commits remain: the initial commit and the commit that adds `data.txt`.

---

## Task

- In `/usr/src/kodekloudrepos/media`, reset the Git commit history to retain only two commits:  
  1. Initial commit  
  2. Commit adding `data.txt`
- Force-push the cleaned history to the remote repository.

---

## Solution

### 1. SSH into the Storage Server

```bash
ssh natasha@ststor01
```

---

### 2. Navigate to the Repository Directory

```bash
cd /usr/src/kodekloudrepos/media
```

---

### 3. Identify the Commit Hash for "add data.txt file"

```bash
git log --oneline
```

- Look for the commit with the message `add data.txt file` and note its hash.

---

### 4. Create a Temporary Branch from That Commit

```bash
git checkout -b clean-history <commit-hash>
```

- Replace `<commit-hash>` with the hash you found in the previous step.

---

### 5. Clean Up History Using Interactive Rebase

```bash
git rebase -i --root
```

- In the editor, **delete all lines except for the initial commit and the commit for `add data.txt file`**.
- Save and exit the editor to complete the rebase.

---

### 6. Force Push the Cleaned History to the Remote

```bash
git checkout master
git reset --hard clean-history
git push origin master --force
```

---

## Result

- The `master` branch now contains only two commits: the initial commit and the commit that adds `data.txt`.
- The cleaned commit history is pushed to the remote repository, overwriting the previous history.
