# Day 74: Jenkins Database Backup Job

## Scenario

There is a requirement to create a Jenkins job to automate the database backup. Below you can find more details to accomplish this task:

 Click on the `Jenkins` button on the top bar to access the Jenkins UI. Login using username `admin` and password `Adm!n321`.
 
- Create a Jenkins job named `database-backup`.
- Configure it to take a database dump of the `kodekloud_db01` database present on the `Database server` in `Stratos Datacenter`, the database user is `kodekloud_roy` and password is `asdfgdsd`.
- The dump should be named in `db_$(date +%F).sql format`, where `date +%F` is the `current date`.
- Copy the `db_$(date +%F).sql` dump to the `Backup Server` under location `/home/clint/db_backups`.
- Further, schedule this job to run periodically at `*/10 * * * *` (please use this exact schedule format).


> **Note:**
- You might need to install some plugins and restart Jenkins service. So, we recommend clicking on `Restart Jenkins when installation is complete and no jobs are running` on plugin installation/update page i.e `update centre`. Also, Jenkins UI sometimes gets stuck when Jenkins service restarts in the back end. In this case, please make sure to refresh the UI page.
- Please make sure to define you cron expression like this `*/10 * * * *` (this is just an example to run job every 10 minutes).
- For these kind of scenarios requiring changes to be done in a web UI, please take screenshots so that you can share it with us for review in case your task is marked incomplete. You may also consider using a screen recording software such as loom.com to record and share your work.
---

## Task

- Access the `Jenkins` via UI.
- Install Plugins.
- Configure Credentials
- Create Passwordless connectivity between db and storage.
- Create a `job`.


---

## Solution

### 1. Access Jenkin via UI

```bash
Click on Jenkins button.
```
---

### 2. Install Plugins
```bash
Goto >> Manage Jenkins >> Plugins >> Select ssh >> Click on Install.
```

---

### 3. Create Passwordless access between DB Server & Backup Server
```bash
[peter@stdb01 ~]$ ssh-keygen -t rsa
[peter@stdb01 ~]$ ssh-copy-id clint@stbkp01

```
---


### 4.Setup Credentials & hosts

<img width="1645" height="761" alt="image" src="https://github.com/user-attachments/assets/43d23fe0-a612-413c-8397-c073c95aea81" />

---
<img width="1773" height="912" alt="image" src="https://github.com/user-attachments/assets/a35134e9-39e9-4575-8bfc-bde532454754" />

---



### 5. Create Job

<img width="1761" height="427" alt="image" src="https://github.com/user-attachments/assets/afcdd2d5-2d3c-4a68-b09a-84b27a7341d7" />

<img width="1831" height="655" alt="image" src="https://github.com/user-attachments/assets/d06b3ff5-a15e-4aaf-9de0-6eca18dccec0" />


```bash
mysqldump -u kodekloud_roy -pasdfgdsd kodekloud_db01 > db_$(date +%F).sql

scp -o StrictHostKeyChecking=no db_$(date +%F).sql clint@stbkp01:/home/clint/db_backups
```

---


> **Result:**  Validate result.
